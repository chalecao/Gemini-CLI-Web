# Gemini CLI UI - Server Middleware

This directory contains middleware functions for the Express.js server.

## File Overview

### `auth.js`

-   **Purpose:** Provides middleware for handling authentication and authorization.
-   **JWT Secret:** Retrieves the JWT secret key from environment variables or uses a default for development.
-   **API Key Validation:**
    -   `validateApiKey`: An optional middleware that checks for a valid API key in the `x-api-key` header if `API_KEY` is set in the environment.
-   **JWT Authentication:**
    -   `authenticateToken`: Verifies the JWT token from the `Authorization` header. It ensures the token is valid and the corresponding user exists and is active.
    -   `authenticateWebSocket`: A similar function to `authenticateToken`, but specifically for authenticating WebSocket connections by checking a token in the query parameters.
-   **Token Generation:**
    -   `generateToken`: Creates a new JWT for a user. The tokens generated by this function do not expire.
